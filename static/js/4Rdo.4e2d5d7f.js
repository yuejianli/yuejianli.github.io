(window.webpackJsonp=window.webpackJsonp||[]).push([["4Rdo"],{"4Rdo":function(e,t,a){"use strict";a.r(t);var i=a("P2sY"),n=a.n(i),o=a("t3Un"),l=function(e,t,a){return Object(o.a)({url:"/config/list",method:"post",data:{pageNum:e,pageSize:t}})},s=function(e){return Object(o.a)({url:"/config/update",method:"post",data:e})},r=function(e){return Object(o.a)({url:"/config/reset",method:"post",data:{id:e}})},c={filters:{},data:function(){return{listLoading:!0,list:null,searchObj:{},currentPage:1,pagesize:10,total:0,dialogFormVisible:!1,temp:{id:void 0,code:"",name:"",codeValue:""},rules:{code:[{required:!0,message:"code is required",trigger:"change"}]}}},created:function(){this.listLoading=!0,this.fetchData(this.currentPage,this.pagesize)},methods:{fetchData:function(e,t){var a=this;this.currentPage=e,this.pagesize=t,l(this.currentPage,this.pagesize,null).then(function(e){a.list=e.data.list,a.total=e.data.total,a.listLoading=!1}).catch(function(e){console.log(e)})},handleCurrentChange:function(e){this.currentPage=e,this.fetchData(this.currentPage,this.pagesize)},handleSizeChange:function(e){this.pagesize=e,this.currentPage=1,this.fetchData(this.currentPage,this.pagesize)},handleConfig:function(e){var t=this;this.dialogFormVisible=!0,this.temp=n()({},e),this.$nextTick(function(){t.$refs.dataForm.clearValidate()})},updateData:function(){var e=this,t=n()({},this.temp);s(t).then(function(){e.dialogFormVisible=!1,e.fetchData(),e.$notify({title:"成功",message:"更新成功",type:"success",duration:2e3})})},resetParam:function(e){var t=this;this.$confirm("是否重置配置参数","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){console.log("打印id",e.id),r(e.id).then(function(e){t.$message({type:"success",message:"重置成功!"}),t.fetchData()})})}}},u=a("KHd+"),d=Object(u.a)(c,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],attrs:{data:e.list,"element-loading-text":"Loading",border:"",fit:"","highlight-current-row":""}},[e._e(),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"参数编码",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.code))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"参数名称",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.name)+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"参数值",width:"200",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.codeValue)+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"添加时间",width:"200",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.createTime)+"\n      ")]}}])},[a("i",{staticClass:"el-icon-time"})]),e._v(" "),a("el-table-column",{attrs:{label:"操作",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-edit"},on:{click:function(a){e.handleConfig(t.row)}}},[e._v("自定义配置")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-setting"},on:{click:function(a){e.resetParam(t.row)}}},[e._v("重置配置")])]}}])})],1),e._v(" "),a("el-pagination",{staticStyle:{padding:"30px 0","text-align":"center"},attrs:{total:e.total,"current-page":e.currentPage,"page-sizes":[5,10,50,100,500],"page-size":e.pagesize,layout:"total, prev, pager, next,sizes, jumper"},on:{"current-change":e.handleCurrentChange,"size-change":e.handleSizeChange}}),e._v(" "),a("el-dialog",{attrs:{visible:e.dialogFormVisible,title:"自定义配置"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"dataForm",staticStyle:{width:"400px","margin-left":"50px"},attrs:{model:e.temp,"label-position":"left","label-width":"70px"}},[a("el-form-item",{attrs:{label:"编码:",prop:"code"}},[a("el-input",{model:{value:e.temp.code,callback:function(t){e.$set(e.temp,"code",t)},expression:"temp.code"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"名称:",prop:"name"}},[a("el-input",{model:{value:e.temp.name,callback:function(t){e.$set(e.temp,"name",t)},expression:"temp.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"值:",prop:"codeValue"}},[a("el-input",{model:{value:e.temp.codeValue,callback:function(t){e.$set(e.temp,"codeValue",t)},expression:"temp.codeValue"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.updateData()}}},[e._v("确认")])],1)],1)],1)},[],!1,null,null,null);d.options.__file="index.vue";t.default=d.exports}}]);